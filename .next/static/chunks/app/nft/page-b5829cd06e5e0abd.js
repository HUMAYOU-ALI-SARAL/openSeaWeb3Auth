(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{47790:()=>{},73776:()=>{},50477:()=>{},79368:()=>{},44446:(e,t,s)=>{Promise.resolve().then(s.bind(s,53014))},49903:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var n=s(95155);s(12115),s(28764);let r=()=>(0,n.jsxs)("div",{className:"loader-container",children:[(0,n.jsxs)("div",{className:"loader",children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]}),(0,n.jsx)("p",{children:"Loading..."})]})},53014:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var n=s(95155),r=s(12115),a=s(82651),i=s(25972),o=s(63779),c=s(90100),l=s(49903);s(1952);var d=s(98867),u=s(1539);s(17385);let p=e=>{let{address:t,name:s,tokenId:a,price:i,onConfirm:o,onCancel:c}=e,[l,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),m=async()=>{try{await navigator.clipboard.writeText(t),g(!0),setTimeout(()=>g(!1),2e3)}catch(e){console.error("Failed to copy address:",e)}},y=async()=>{try{p(!0),f(null),await o()}catch(e){console.error("Error during purchase:",e),f("Failed to complete purchase. Please try again.")}finally{p(!1)}};return(0,n.jsx)("div",{className:"popup-overlay",children:(0,n.jsxs)("div",{className:"popup-content",children:[(0,n.jsx)("h2",{children:"NFT Purchase Confirmation"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Name:"})," ",s]}),(0,n.jsxs)("div",{className:"address-container",children:[(0,n.jsx)("strong",{children:"Address:"}),(0,n.jsx)("span",{className:"address-text",children:(e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4)))(t)}),(0,n.jsx)("button",{className:"copy-button",onClick:m,title:x?"Copied!":"Copy address",children:x?(0,n.jsx)(d.A,{size:16}):(0,n.jsx)(u.A,{size:16})})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Token ID:"})," ",a]}),i?(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Price:"})," ",i]}):(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Price:"})," Not Listed"]}),h&&(0,n.jsx)("p",{className:"error-message",children:h}),(0,n.jsxs)("div",{className:"popup-buttons",children:[(0,n.jsx)("button",{className:"confirm-button",onClick:y,disabled:l,children:l?"Processing...":"Confirm"}),(0,n.jsx)("button",{className:"cancel-button",onClick:c,disabled:l,children:"Cancel"})]})]})})},h=e=>{let{address:t,name:s,tokenId:a,onConfirm:i,onCancel:o,isOwner:c,isListed:l}=e,[p,h]=(0,r.useState)(!1),[f,x]=(0,r.useState)(null),[g,m]=(0,r.useState)(!1),[y,j]=(0,r.useState)(""),v=async()=>{try{await navigator.clipboard.writeText(t),m(!0),setTimeout(()=>m(!1),2e3)}catch(e){console.error("Failed to copy address:",e)}},b=async e=>{if(e.preventDefault(),!y||isNaN(Number(y))||0>=Number(y)){x("Please enter a valid price");return}try{h(!0),x(null),await i(y)}catch(e){console.error("Error during listing:",e),x("Failed to list NFT. Please try again.")}finally{h(!1)}};return console.log(c,l,"From update.tsx"),(0,n.jsx)("div",{className:"popup-overlay",children:(0,n.jsxs)("div",{className:"popup-content",children:[(0,n.jsx)("h2",{children:"List NFT for Sale"}),!c||l?(0,n.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 text-yellow-600 rounded-md text-sm",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"30px"},children:[(0,n.jsx)("div",{children:c?"This NFT is already listed for sale.":"You are not the owner of this NFT and cannot list it for sale."}),(0,n.jsx)("button",{type:"button",onClick:o,className:"cancel-button",children:"Ok"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Name:"})," ",s]}),(0,n.jsxs)("div",{className:"address-container",children:[(0,n.jsx)("strong",{children:"Address:"}),(0,n.jsx)("code",{className:"address-text",children:(e=>e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"")(t)}),(0,n.jsx)("button",{onClick:v,className:"copy-button",title:g?"Copied!":"Copy address",children:g?(0,n.jsx)(d.A,{className:"w-4 h-4 text-green-500"}):(0,n.jsx)(u.A,{className:"w-4 h-4 text-gray-500"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Token ID:"})," ",a]}),(0,n.jsxs)("form",{onSubmit:b,className:"mt-4",children:[(0,n.jsxs)("div",{className:"mb-4",style:{marginTop:"20px"},children:[(0,n.jsx)("label",{htmlFor:"price",children:(0,n.jsx)("strong",{children:"Listing Price (ETH)"})}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"number",id:"price",value:y,onChange:e=>j(e.target.value),placeholder:"0.00",step:"0.000001",min:"0",className:"price-input",disabled:p,style:{marginTop:"10px",width:"70%",padding:"10px"}}),(0,n.jsx)("span",{className:"absolute right-3 top-2.5 text-gray-500",children:"ETH"})]})]}),f&&(0,n.jsx)("div",{className:"mt-2 p-3 bg-red-50 text-red-500 rounded-md text-sm",children:f}),(0,n.jsxs)("div",{className:"popup-buttons",children:[(0,n.jsx)("button",{type:"submit",disabled:p||!y,className:"confirm-button ".concat(p||!y?"btn-disabled":"btn-active"),children:p?"Processing...":"List NFT"}),(0,n.jsx)("button",{type:"button",onClick:o,disabled:p,className:"cancel-button",children:"Cancel"})]})]})]})]})})};var f=s(76046);let x=e=>{let{isOpen:t,onRequestClose:s,onConfirm:r,title:a,message:i}=e;return t?(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:s,children:(0,n.jsxs)("div",{style:{backgroundColor:"#fff",padding:"20px",maxWidth:"400px",width:"90%",borderRadius:"8px",position:"relative",transform:"translate(0, 0)"},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h2",{children:a}),(0,n.jsx)("p",{children:i}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[(0,n.jsx)("button",{onClick:s,style:{marginRight:"10px",padding:"8px 16px",backgroundColor:"#ccc",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),(0,n.jsx)("button",{onClick:r,style:{padding:"8px 16px",backgroundColor:"#0070f3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Confirm"})]})]})}):null};var g=s(48173),m=s.n(g);let y={width:"100%",backgroundColor:"#333",color:"#fff",padding:"10px 20px",position:"fixed",top:0,left:0,zIndex:999},j={display:"flex",justifyContent:"space-between",alignItems:"center",maxWidth:"1200px",margin:"0 auto"},v={fontSize:"1.5rem",fontWeight:"bold",color:"#fff",textDecoration:"none"},b={marginLeft:"15px",padding:"8px 16px",backgroundColor:"#ff4d4f",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},N={display:"flex",alignItems:"center"},w={fontSize:"0.9rem",backgroundColor:"#444",padding:"5px 10px",borderRadius:"20px"},k=()=>{let{loggedIn:e,logout:t,getAccounts:s}=(0,c.f)(),a=(0,f.useRouter)(),[i,o]=(0,r.useState)(!1),[l,d]=(0,r.useState)(null),u=async()=>{try{await t(),a.push("/")}catch(e){console.error("Logout failed:",e)}};return(0,r.useEffect)(()=>{(async()=>{e?d(await s()):d(null)})()},[e,s]),(0,n.jsxs)("nav",{style:y,children:[(0,n.jsxs)("div",{style:j,children:[(0,n.jsx)(m(),{href:"/collections",style:v,children:"Logo"}),(0,n.jsxs)("div",{style:N,children:[(0,n.jsxs)("span",{style:w,children:["Connected Account: ",l||"Loading..."]}),(0,n.jsx)("button",{onClick:()=>o(!0),style:b,children:"Logout"})]})]}),(0,n.jsx)(x,{isOpen:i,onRequestClose:()=>o(!1),onConfirm:()=>{o(!1),u()},title:"Confirm Logout",message:"Are you sure you want to logout?"})]})};var C=s(89208);let S=()=>{let{web3Provider:e,getAccounts:t}=(0,c.f)(),[s,d]=(0,r.useState)([]),[u,x]=(0,r.useState)(!0),[g,m]=(0,r.useState)(null),[y,j]=(0,r.useState)({}),[v,b]=(0,r.useState)(null),[N,w]=(0,r.useState)(null),[S,E]=(0,r.useState)(null),[T,F]=(0,r.useState)(null),[A,I]=(0,r.useState)({}),[O,L]=(0,r.useState)(!1),[P,z]=(0,r.useState)({isOpen:!1,name:"",tokenId:"",address:"",price:"",selectedNft:null}),_=(0,f.useRouter)();(0,r.useEffect)(()=>{C.A.get("token")?_.push("/nft"):_.push("/")},[_]);let[D,R]=(0,r.useState)({isOpen:!1,name:"",tokenId:"",address:"",selectedNft:null,isOwner:!1,isListed:!1}),H=async(e,t,s)=>{L(!0),await q(e.identifier),R({isOpen:!0,name:e.name,tokenId:e.identifier,address:e.contract,selectedNft:e,isOwner:t,isListed:s}),L(!1)},W=async e=>{if(D.selectedNft&&S)try{await G(D.selectedNft.contract,D.selectedNft.identifier,e,S),R(e=>({...e,isOpen:!1})),alert("NFT listed successfully!")}catch(e){throw console.error("Error listing NFT:",e),e}};(0,r.useEffect)(()=>{let s=async()=>{try{let e=await t();e&&E(e)}catch(e){console.error("Error fetching account address:",e),F("Failed to fetch account address")}};e&&(K(),s())},[e,t]),(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("collection");m(e),x(!0),F(null);try{let t=await a.A.get("https://testnets-api.opensea.io/api/v2/collection/".concat(e,"/nfts?limit=30&include_orders=true"),{headers:{accept:"application/json","x-api-key":"6772ed3ee6c743c78b14305eedc0e9c9"}});d(t.data.nfts||[]),console.log("res.data.nfts",t.data.nfts)}catch(e){console.error("Error fetching NFTs:",e),F("Failed to fetch NFTs")}finally{x(!1)}})()},[]),(0,r.useEffect)(()=>{(async()=>{await U()})(),console.log(A,"these are")},[S]);let K=async()=>{try{if(!e)throw Error("No Web3Auth provider found!");let t=new o.k(e);w(t);let s=new i.OpenSeaSDK(t,{chain:i.Chain.Sepolia,apiKey:"6772ed3ee6c743c78b14305eedc0e9c9"});b(s)}catch(e){console.error("Failed to initialize provider:",e),F("Failed to initialize provider")}};(0,r.useEffect)(()=>{console.log(A,"These are updated owned NFTs")},[A]);let U=async()=>{try{let e=localStorage.getItem("walletAddress"),t=(await a.A.get("https://testnets-api.opensea.io/api/v2/chain/sepolia/account/".concat(S||e,"/nfts"),{headers:{accept:"application/json","x-api-key":"6772ed3ee6c743c78b14305eedc0e9c9"}})).data.nfts;console.log(t,"these are nfts"),t.forEach(e=>{console.log(e.identifier,e.contract),I(t=>({...t,[e.identifier]:e.contract}))}),console.log(A,"These are owned NFTs")}catch(e){console.error("Error fetching NFTs:",e.response||e.message)}},q=async e=>{try{var t,s,n;let r=await a.A.get("https://testnets-api.opensea.io/api/v2/listings/collection/".concat(g,"/nfts/").concat(e,"/best"),{headers:{accept:"application/json","x-api-key":"6772ed3ee6c743c78b14305eedc0e9c9"}}),i=null===(n=r.data)||void 0===n?void 0:null===(s=n.price)||void 0===s?void 0:null===(t=s.current)||void 0===t?void 0:t.value,o=i?i/1e18+"ETH":"Not Listed!";j(t=>({...t,[e]:o}))}catch(t){console.error("Error fetching price for NFT",e,":",t),j(t=>({...t,[e]:null}))}},G=async function(e,t,s,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Math.round(Date.now()/1e3);try{if(!v)throw Error("OpenSea SDK not initialized");return await v.createListing({asset:{tokenAddress:e,tokenId:t},accountAddress:n,startAmount:s,listingTime:r})}catch(e){throw F("Failed to list NFT"),e}},J=async e=>{var t;console.log(e),console.log(y[e.identifier]),await q(e.identifier),z({isOpen:!0,name:e.name,tokenId:e.identifier,address:e.contract,price:(null===(t=y[e.identifier])||void 0===t?void 0:t.toString())||"Not Listed!",selectedNft:e})},M=async()=>{if(P.selectedNft)try{await B(P.selectedNft),z(e=>({...e,isOpen:!1}))}catch(e){console.error("Error during purchase:",e),F("Failed to complete purchase")}},B=async e=>{try{if(!v||!N||!S)throw Error("SDK, provider, or accountAddress is missing.");let t=await v.api.getOrder({side:i.OrderSide.LISTING,assetContractAddress:e.contract,tokenId:e.identifier});if(!t)throw Error("No active listing found for this NFT");let s=await v.fulfillOrder({order:t,accountAddress:S});window.location.reload(),console.log(s)}catch(e){throw console.error("Purchase error:",e),Error("Failed to complete the purchase")}};return u?(0,n.jsx)(l.A,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k,{}),(0,n.jsxs)("div",{style:{padding:"30px"},children:[T&&(0,n.jsx)("div",{className:"error-message",children:T}),P.isOpen&&(0,n.jsx)(p,{address:P.address,name:P.name,tokenId:P.tokenId,price:P.price?P.price:"Not Listed",onConfirm:M,onCancel:()=>z(e=>({...e,isOpen:!1}))}),D.isOpen&&!O&&(0,n.jsx)(h,{address:D.address,name:D.name,tokenId:D.tokenId,onConfirm:W,onCancel:()=>R(e=>({...e,isOpen:!1})),isOwner:D.isOwner,isListed:D.isListed})]}),(0,n.jsx)("div",{className:"nft-container",children:s.map(e=>{let t=A[e.identifier]===e.contract,s=void 0!==y[e.identifier];return(0,n.jsxs)("div",{className:"nft-item",children:[(0,n.jsx)("h2",{children:e.name}),(0,n.jsx)("img",{src:e.image_url,alt:e.name,className:"nft-image"}),(0,n.jsx)("p",{children:e.description}),(0,n.jsxs)("div",{className:"nft-actions",children:[(0,n.jsx)("button",{onClick:()=>J(e),disabled:t,className:"btn ".concat(t?"btn-disabled":"btn-active"),children:t?"Owned":"Buy on OpenSea"}),(0,n.jsx)("button",{onClick:()=>!O&&H(e,t,s),className:"btn btn-active",children:u?"loading....":"List on OpenSea"})]})]},e.identifier)})})]})}},90100:(e,t,s)=>{"use strict";s.d(t,{V:()=>j,f:()=>v});var n=s(95155),r=s(12115),a=s(37662),i=s(91009),o=s(36918),c=s(10387),l=s(62874),d=s(31390);let u={chainNamespace:i.l.EIP155,chainId:"0xaa36a7",rpcTarget:"https://rpc.ankr.com/eth_sepolia",displayName:"Ethereum Sepolia Testnet",blockExplorerUrl:"https://sepolia.etherscan.io",ticker:"ETH",tickerName:"Ethereum",logo:"https://cryptologos.cc/logos/ethereum-eth-logo.png"},p=new c.B({config:{chainConfig:u}}),h=new l.G({clientId:"BKruFzwW1MziuExIa-F9UF1EknlpTqjqyqujvHJYsJtP2yC_JedFmP-Nm7NnGfSJ5Y-f77jKybowksGhydMP_aU",web3AuthNetwork:o.Lr.SAPPHIRE_DEVNET,privateKeyProvider:p}),f=new d.M;h.configureAdapter(f);var x=s(63779);s(52316);let g={getAccounts:async e=>{try{let t=new x.k(e),s=(await t.getSigner()).getAddress();return await s}catch(e){return e}}};var m=s(89208);let y=(0,r.createContext)(null);function j(e){let{children:t}=e,[s,i]=(0,r.useState)(null),[o,c]=(0,r.useState)(!1),[l,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{console.log(l);try{await h.init(),i(h.provider),h.connected&&(c(!0),await p())}catch(e){console.error(e)}})()},[l]);let u=async e=>{try{let t=await h.connectTo(a.Db.AUTH,{loginProvider:e});i(t),h.connected&&(c(!0),await p());let s=await f();console.log(s,"this is useinfo")}catch(e){console.error("Login failed:",e)}},p=async()=>{try{let e=await j();d(e)}catch(e){console.error("Error fetching account:",e)}},f=async()=>{try{return await h.getUserInfo()}catch(e){throw console.error("Error getting user info:",e),e}},x=async()=>{try{await h.logout(),i(null),c(!1),d(null),m.A.remove("token"),localStorage.setItem("walletAddress",""),window.location.reload()}catch(e){console.error("Logout failed:",e)}},j=async()=>{if(!s)return console.warn("Provider not initialized yet"),null;try{let e=await g.getAccounts(s);return localStorage.setItem("walletAddress",e),e}catch(e){return console.error("Error getting accounts:",e),null}};return(0,n.jsx)(y.Provider,{value:{web3Provider:s,loggedIn:o,login:u,logout:x,getUserInfo:f,getAccounts:j},children:t})}function v(){let e=(0,r.useContext)(y);if(!e)throw Error("useWeb3Auth must be used within a Web3AuthProvider");return e}},28764:()=>{},17385:()=>{},1952:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[857,666,927,737,567,620,441,517,358],()=>t(44446)),_N_E=e.O()}]);